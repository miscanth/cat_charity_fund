# Проект QRKot

## Об авторе

Меня зовут Юлия, и учусь в ЯндексПрактикуме в 21 когорте курса «Python-разработчик плюс».

### Описание проекта и используемые технологии

Проект QRKot — это API для приложения: Благотворительный фонд поддержки котиков.
Фонд собирает пожертвования на различные целевые проекты, связанные с поддержкой кошачьей популяции.

Ключевые возможности сприложения:

1) Целевые проекты создаются администраторами сайта.
2) Любой пользователь может видеть список всех проектов, включая требуемые и уже внесенные суммы. Это касается всех проектов — и открытых, и закрытых.
3) Зарегистрированные пользователи могут отправлять пожертвования и просматривать список своих пожертвований.

Это полностью рабочий проект, бэкенд-приложение которого создано на базе **FastAPI**.
Для запуска FastAPI использован ASGI-сервер — **Uvicorn**.

К проекту подключены следующие библиотеки:

* Эндпоинты FastAPI настроены на приём JSON при помощи классов **Pydantic**.
* Для работы с env-файлами подключена библиотека **python-dotenv**.
* На этапе разработки использована база данных **SQLite**.
* Для асинхронного подключения к SQLite установлен драйвер **aiosqlite**.
* Работа с базой организована через **SQLAlchemy**.
* К проекту так же подключено **ORM SQLAlchemy**.
* Для миграций подключена библиотека **Alembic**.
* Для управления пользователями используется библиотека **FastAPI Users**.
* Токен аутентификации передаётся при помощи транспорта **Bearer**, а генерируется и хранится он с помощью стратегии **JSON Web Token (JWT)**.
* Подключены три роутера: аутентификационный роутер (**Auth router**), регистрационный роутер (**Register router**) и роутер пользователей (**Users router**).

### Как запустить проект:
Клонировать репозиторий и перейти в него в командной строке: 
```
git clone git@github.com:miscanth/cat_charity_fund.git
```
Cоздать и активировать виртуальное окружение: 
```
python3.9 -m venv venv 
```
* Если у вас Linux/macOS 

    ```
    source venv/bin/activate
    ```
* Если у вас windows 
 
    ```
    source venv/scripts/activate
    ```
```
python3.9 -m pip install --upgrade pip
```
Установить зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```
Запустить проект:

```
uvicorn app.main:app --reload
```

### Примеры запросов:

Пример GET-запроса на получение списка всех проектов для благотворительности:

*GET .../charity_project/*

Пример ответа:
```
[
  {
    "name": "Колония",
    "description": "Обустройство кошачьей колонии в подвале.",
    "full_amount": 170000,
    "id": 1,
    "invested_amount": 170000,
    "fully_invested": true,
    "create_date": "2023-12-21T10:42:25.775409",
    "close_date": "2023-12-21T10:43:50.796163"
  },
  {
    "name": "chimichangas4life",
    "description": "Huge fan of chimichangas. Wanna buy a lot.",
    "full_amount": 5000,
    "id": 2,
    "invested_amount": 100,
    "fully_invested": false,
    "create_date": "2023-12-21T10:43:43.165822"
  }
]
```

Пример POST-запроса на создание нового проекта:

*POST .../charity_project/*

```
{
    "name": "Корм",
    "description": "На корм оставшимся без попечения кошкам.",
    "full_amount": 7500
}
```

Пример ответа:
```
{   "name": "Корм",
    "description": "На корм оставшимся без попечения кошкам.",
    "full_amount": 7500
    "id": 23,
    "invested_amount": 0,
    "fully_invested": false,
    "create_date": "2023-12-21T11:05:50.698546"
}
```

Пример PATCH-запроса на редактирование незакрытого проекта:

*PATCH .../charity_project/23/*

```
{
    "name": "Медицинское обслуживание",
    "description": "На медицинское обслуживание нуждающихся хвостатых."
}
```

Пример ответа:
```
{
    "name": "Медицинское обслуживание",
    "description": "На медицинское обслуживание нуждающихся хвостатых.",
    "full_amount": 15000,
    "id": 23,
    "invested_amount": 0,
    "fully_invested": false,
    "create_date": "2023-12-21T11:05:50.698546",
    "close_date": null
}
```

Пример GET-запроса на получение списка всех пожертвований текущего пользователя:

*GET .../donation/my/*

Пример ответа:
```
[
  {
    "full_amount": 3500,
    "comment": "Пусть хвостатые не голодают сегодня.",
    "id": 1,
    "create_date": "2023-12-21T10:40:12.768150"
  },
  {
    "full_amount": 1740,
    "id": 2,
    "create_date": "2023-12-21T10:42:51.101396"
  }
]
```

Пример POST-запроса на создание нового пожертвования:

*POST .../donation/*

```
{
  "full_amount": 4500,
  "comment": "На хорошую жизнь котикам."
}
```

Пример ответа:
```
{
  "full_amount": 4500,
  "comment": "На хорошую жизнь котикам.",
  "id": 1,
  "create_date": "2023-12-21T10:40:12.768150"
}
```